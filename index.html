<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEATHER</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0b0e14;
            color: white;
            min-height: 100vh;
            padding: 16px;
        }

        .app {
            max-width: 380px;
            margin: 0 auto;
        }

        /* –•–µ–¥–µ—Ä */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .time {
            font-size: 17px;
            font-weight: 600;
            color: #8e98a3;
        }

        .balance {
            background: #1e222a;
            padding: 8px 16px;
            border-radius: 30px;
            font-size: 15px;
            font-weight: 600;
            color: #fff;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–≥–æ–¥—ã */
        .weather-card {
            background: linear-gradient(145deg, #1e222a, #15181f);
            border-radius: 30px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 8px 0 #0a0c10;
        }

        .city-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .city {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
        }

        .temp-big {
            font-size: 64px;
            font-weight: 800;
            line-height: 1;
            margin-bottom: 12px;
        }

        .weather-desc {
            color: #8e98a3;
            font-size: 17px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –î–µ—Ç–∞–ª–∏ */
        .details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .detail-item {
            background: #0b0e14;
            padding: 16px 12px;
            border-radius: 20px;
            text-align: center;
        }

        .detail-label {
            color: #8e98a3;
            font-size: 13px;
            margin-bottom: 6px;
        }

        .detail-value {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
        }

        /* –ü–æ–∏—Å–∫ */
        .search-section {
            background: #1e222a;
            border-radius: 30px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .section-title {
            color: #8e98a3;
            font-size: 15px;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .search-input {
            width: 100%;
            background: #0b0e14;
            border: none;
            border-radius: 20px;
            padding: 16px 20px;
            color: white;
            font-size: 17px;
            margin-bottom: 16px;
        }

        .search-input::placeholder {
            color: #4a525c;
        }

        .search-btn {
            width: 100%;
            background: #2a7f6e;
            border: none;
            border-radius: 20px;
            padding: 16px;
            color: white;
            font-weight: 700;
            font-size: 17px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 0 #1a4f43;
        }

        .search-btn:active {
            transform: translateY(6px);
            box-shadow: none;
        }

        /* –ë—ã—Å—Ç—Ä—ã–µ –≥–æ—Ä–æ–¥–∞ */
        .cities-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 16px;
        }

        .city-tag {
            background: #0b0e14;
            padding: 12px 8px;
            border-radius: 16px;
            text-align: center;
            color: #8e98a3;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .city-tag.active {
            background: #2a7f6e;
            color: white;
        }

        .city-tag:hover {
            background: #2a7f6e;
            color: white;
        }

        /* –°—Ç–∞—Ç—É—Å */
        .status {
            text-align: center;
            color: #8e98a3;
            font-size: 13px;
            margin-top: 20px;
            padding: 16px;
        }

        .gift-icon {
            font-size: 20px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #8e98a3;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- –•–µ–¥–µ—Ä –∫–∞–∫ –≤ —Ç–≤–æ–µ–º —Å–∫—Ä–∏–Ω–µ -->
        <div class="header">
            <span class="time">10:45</span>
            <span class="balance">üéÅ TON, your balance has been updated</span>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–≥–æ–¥—ã -->
        <div class="weather-card" id="weatherCard">
            <div class="city-row">
                <span class="city" id="cityName">Kyiv</span>
                <span class="gift-icon">üéÅ</span>
            </div>
            <div class="temp-big" id="temperature">22¬∞</div>
            <div class="weather-desc" id="description">
                <span>‚òÄÔ∏è</span>
                <span>Sunny</span>
            </div>
            
            <div class="details-grid">
                <div class="detail-item">
                    <div class="detail-label">Feels like</div>
                    <div class="detail-value" id="feelsLike">20¬∞</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Wind</div>
                    <div class="detail-value" id="wind">5 m/s</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Humidity</div>
                    <div class="detail-value" id="humidity">65%</div>
                </div>
            </div>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-section">
            <div class="section-title">üå§Ô∏è WEATHER APP</div>
            <input type="text" class="search-input" id="cityInput" placeholder="Enter city name" value="Kyiv">
            <button class="search-btn" onclick="getWeather()">
                <span>üîç</span>
                <span>Get Weather</span>
            </button>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –≥–æ—Ä–æ–¥–∞ -->
            <div class="cities-grid">
                <div class="city-tag active" onclick="selectCity('Kyiv')">Kyiv</div>
                <div class="city-tag" onclick="selectCity('London')">London</div>
                <div class="city-tag" onclick="selectCity('New York')">NYC</div>
                <div class="city-tag" onclick="selectCity('Tokyo')">Tokyo</div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å -->
        <div class="status" id="status">
            ‚ö° Updated just now
        </div>
    </div>

    <script>
        // –¢–í–û–ô API –ö–õ–Æ–ß
        const API_KEY = "0f8d4d200034367f49673052d36188f1";

        // Telegram Web App
        if (window.Telegram?.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        }

        // –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞
        function selectCity(city) {
            document.getElementById('cityInput').value = city;
            document.querySelectorAll('.city-tag').forEach(tag => {
                tag.classList.remove('active');
                if (tag.textContent === city || 
                    (city === 'New York' && tag.textContent === 'NYC') ||
                    (city === 'NYC' && tag.textContent === 'NYC')) {
                    tag.classList.add('active');
                }
            });
            getWeather();
        }

        // –ü–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É
        async function getWeather() {
            let city = document.getElementById('cityInput').value.trim();
            if (!city) city = 'Kyiv';

            // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è API
            let apiCity = city;
            if (city === 'NYC') apiCity = 'New York';
            
            document.getElementById('status').innerHTML = '‚è≥ Loading...';

            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?q=${apiCity}&appid=${API_KEY}&units=metric`
                );
                
                if (!response.ok) throw new Error('City not found');
                
                const data = await response.json();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                document.getElementById('cityName').textContent = data.name;
                document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}¬∞`;
                document.getElementById('feelsLike').textContent = `${Math.round(data.main.feels_like)}¬∞`;
                document.getElementById('wind').textContent = `${data.wind.speed} m/s`;
                document.getElementById('humidity').textContent = `${data.main.humidity}%`;
                
                // –≠–º–æ–¥–∑–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
                const weatherId = data.weather[0].id;
                let emoji = '‚òÄÔ∏è';
                if (weatherId >= 200 && weatherId < 300) emoji = '‚õàÔ∏è';
                else if (weatherId >= 300 && weatherId < 400) emoji = 'üåßÔ∏è';
                else if (weatherId >= 500 && weatherId < 600) emoji = 'üå¶Ô∏è';
                else if (weatherId >= 600 && weatherId < 700) emoji = '‚ùÑÔ∏è';
                else if (weatherId >= 700 && weatherId < 800) emoji = 'üå´Ô∏è';
                else if (weatherId === 800) emoji = '‚òÄÔ∏è';
                else if (weatherId > 800) emoji = '‚òÅÔ∏è';
                
                const description = data.weather[0].description;
                document.getElementById('description').innerHTML = 
                    `<span>${emoji}</span><span style="text-transform: capitalize;">${description}</span>`;
                
                document.getElementById('status').innerHTML = '‚ö° Updated just now';
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                if (window.Telegram?.WebApp) {
                    Telegram.WebApp.sendData(JSON.stringify({
                        city: data.name,
                        temp: Math.round(data.main.temp),
                        weather: description
                    }));
                }
                
            } catch (error) {
                document.getElementById('status').innerHTML = '‚ùå City not found';
                document.getElementById('cityName').textContent = 'Error';
            }
        }

        // Enter key
        document.getElementById('cityInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') getWeather();
        });

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–≥–æ–¥—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        window.onload = () => {
            selectCity('Kyiv');
        };
    </script>
</body>
</html>
